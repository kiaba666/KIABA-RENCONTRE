services:
  - type: web
    name: kiaba-web
    env: python
    region: frankfurt
    plan: free
    repo: https://github.com/kiaba666/KIABA-RENCONTRE.git
    branch: master
    autoDeploy: true
    buildCommand: pip install -r requirements.txt && python manage.py collectstatic --noinput
    startCommand: bash start.sh
    healthCheckPath: /
    envVars:
      - key: DEBUG
        value: "False"
      - key: SECRET_KEY
        generateValue: true
      - key: ALLOWED_HOSTS
        value: "ci-kiaba.com,www.ci-kiaba.com"
      - key: SITE_URL
        value: "https://ci-kiaba.com"
      # Database (fill with your Render PostgreSQL connection info)
      - key: DB_ENGINE
        value: "postgres"
      - key: POSTGRES_DB
        value: "kiaba_db_wzbz_8ruc"
      - key: POSTGRES_USER
        value: "kiaba_db_wzbz_user"
      - key: POSTGRES_PASSWORD
        value: "GIC0OwgP0ACv90JSg1EH19Hre1Ndg1ir"
      - key: POSTGRES_HOST
        value: "dpg-d53940khg0os738mrqq0-a.oregon-postgres.render.com"
      - key: POSTGRES_PORT
        value: "5432"
      # Email configuration (remove EMAIL_BACKEND - handled by settings.py)
      - key: EMAIL_HOST
        value: "mail55.lwspanel.com"
      - key: EMAIL_PORT
        value: "465"
      - key: EMAIL_USE_SSL
        value: "True"
      - key: EMAIL_HOST_USER
        value: "support@ci-kiaba.com"
      - key: EMAIL_HOST_PASSWORD
        value: "your_password_here"
      - key: DEFAULT_FROM_EMAIL
        value: "KIABA <support@ci-kiaba.com>"
      - key: SERVER_EMAIL
        value: "KIABA Errors <errors@ci-kiaba.com>"
      # CinetPay configuration
      - key: CINETPAY_SITE_ID
        value: "105907241"
      - key: CINETPAY_API_KEY
        value: "1317052651681a6fdef33a80.27918103"
      - key: CINETPAY_SITE_KEY
        value: "9694017766946fdd7c66b09.59234458"
      - key: CINETPAY_MODE
        value: "PRODUCTION"
      - key: CINETPAY_NOTIFY_URL
        value: "https://ci-kiaba.com/accounts/payment/cinetpay/notify/"
      - key: CINETPAY_RETURN_URL
        value: "https://ci-kiaba.com/accounts/payment/cinetpay/return/"
    disks:
      - name: media
        mountPath: /app/media
        sizeGB: 5
